/**
 * Buffer object to share data and logic between
 * the Godot app and the app shell.
 */
class GodotAppBuffer {
  
  /**
   * Contains properties related to an error generated by the app.
   * 
   * Properties:
   * - `message`
   * - `lineNumber`
   * 
   * If this is `undefined` then there is no error.
   */
  error;

  /**
   * Code typed by the user, in a string. This is read from by the
   * Godot app and written to by the shell.
   */
  code;

  /** Signals the Godot app to update. */
  updateApp() {
    /* Should be overwritten by the Godot app. */
    throw new Error('GodotAppBuffer.updateApp not defined by Godot app.');
  }

  /** Signals the app shell to update */
  updateShell() {
    /* Will be overwritten by the app shell. */
  }

  constructor(updateShellFunc) {
    if (typeof updateShellFunc !== 'function') {
      throw new TypeError('GodotAppBuffer constructor must have a function parameter.');
    }
    
    this.updateShell = updateShellFunc;
  }
}